
import Model from 'proton-mongoose-model'
const genders = ['male', 'female', 'other']

/*
 *------------------------------------------------------------------------------
 *                                    Sub Schemas
 *------------------------------------------------------------------------------
 */


/*
 *------------------------------------------------------------------------------
 *                              Principal Schema
 *------------------------------------------------------------------------------
 */


export default class User extends Model {

  schema() {
    return {
      firstName: String,
      lastName: String,
      avatar: String,
      gender: {
        type: String,
        enum: genders,
      },
      birthdate: {
        type: Date,
      },
      email: {
        type: String,
        unique: true,
        sparse: true,
        validate: [v => /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(v), 'Invalid email format'],
      },
      lastLoginAt: {
        type: Date,
        required: true,
        default: Date.now,
      },
    }
  }


  /*
   *----------------------------------------------------------------------------
   *                            Life cycle methods
   *----------------------------------------------------------------------------
   */


  /*
   *----------------------------------------------------------------------------
   *                              Attr Methods
   *----------------------------------------------------------------------------
   */


  /*
   *----------------------------------------------------------------------------
   *                              Static Methods
   *----------------------------------------------------------------------------
   */

}

/*
 *----------------------------------------------------------------------------
 *                              Private functions
 *----------------------------------------------------------------------------
 */
